<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Income Gap Calculator - TeacherFinCoach</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #2E5C8A 0%, #1B3A57 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .back-link {
            display: inline-block;
            color: #6BC9BC;
            text-decoration: none;
            margin-bottom: 20px;
            font-weight: 500;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        .disclaimer {
            background: #E8F7F5;
            border-left: 4px solid #6BC9BC;
            padding: 15px;
            margin-bottom: 30px;
            border-radius: 5px;
        }

        .disclaimer-title {
            font-weight: bold;
            margin-bottom: 8px;
            color: #2E5C8A;
        }

        .disclaimer-text {
            color: #2E5C8A;
            font-size: 14px;
            line-height: 1.6;
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 32px;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 16px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
        }

        .label-hint {
            font-size: 13px;
            color: #666;
            font-weight: 400;
            margin-top: 4px;
        }

        input[type="number"],
        input[type="text"],
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input[type="number"]:focus,
        input[type="text"]:focus,
        select:focus {
            outline: none;
            border-color: #6BC9BC;
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 20px;
            cursor: pointer;
            border: 2px solid #e0e0e0;
            transition: all 0.3s;
        }

        .checkbox-container:hover {
            border-color: #6BC9BC;
            background: #E8F7F5;
        }

        .checkbox-container input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .checkbox-label {
            font-size: 16px;
            font-weight: 500;
            color: #333;
            cursor: pointer;
        }

        .spouse-section {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 25px;
            border: 2px solid #6BC9BC;
        }

        .spouse-section.active {
            display: block;
        }

        .spouse-section-title {
            font-size: 18px;
            font-weight: 600;
            color: #6BC9BC;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .coach-note {
            background: #E8F7F5;
            border-left: 4px solid #6BC9BC;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
            font-style: italic;
        }

        .calculate-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #2E5C8A 0%, #6BC9BC 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            margin-top: 10px;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(46, 92, 138, 0.4);
        }

        .results {
            display: none;
            margin-top: 40px;
        }

        .results.active {
            display: block;
        }

        .results-header {
            font-size: 24px;
            color: #333;
            margin-bottom: 20px;
            border-bottom: 3px solid #6BC9BC;
            padding-bottom: 10px;
        }

        .income-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .breakdown-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid #e0e0e0;
        }

        .breakdown-card.highlight {
            background: linear-gradient(135deg, #2E5C8A 0%, #6BC9BC 100%);
            color: white;
            border: none;
        }

        .breakdown-label {
            font-size: 14px;
            margin-bottom: 8px;
            opacity: 0.8;
        }

        .breakdown-amount {
            font-size: 28px;
            font-weight: bold;
        }

        .info-box {
            background: #E8F7F5;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .info-box-title {
            font-weight: 600;
            color: #2E5C8A;
            margin-bottom: 10px;
        }

        .sustainability-section {
            background: #fff;
            border: 3px solid #2E5C8A;
            border-radius: 12px;
            padding: 25px;
            margin: 30px 0;
        }

        .sustainability-title {
            font-size: 22px;
            color: #2E5C8A;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .projection-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        .projection-table th {
            background: #2E5C8A;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }

        .projection-table td {
            padding: 10px 12px;
            border-bottom: 1px solid #e0e0e0;
        }

        .projection-table tr:hover {
            background: #f8f9fa;
        }

        .projection-table .depleted {
            background: #FEE2E2;
            color: #991B1B;
            font-weight: 600;
        }

        .verdict {
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            font-size: 18px;
            font-weight: 600;
        }

        .verdict.success {
            background: #D1FAE5;
            color: #065F46;
            border: 2px solid #10B981;
        }

        .verdict.warning {
            background: #FEE2E2;
            color: #991B1B;
            border: 2px solid #EF4444;
        }

        .action-steps {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 8px;
            margin-top: 30px;
        }

        .action-steps h3 {
            color: #333;
            margin-bottom: 20px;
        }

        .step {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            align-items: start;
        }

        .step-number {
            background: #2E5C8A;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
        }

        .step-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 24px;
            }

            .income-breakdown {
                grid-template-columns: 1fr;
            }

            .projection-table {
                font-size: 14px;
            }

            .projection-table th,
            .projection-table td {
                padding: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="dashboard.html" class="back-link">‚Üê Back to Dashboard</a>

        <div class="disclaimer">
            <div class="disclaimer-title">‚ö†Ô∏è Calculator Disclaimer</div>
            <div class="disclaimer-text">
                This calculator provides educational estimates based on the information you provide. Results are hypothetical projections
                and do not guarantee future performance. Actual pension amounts, Social Security benefits, and investment returns will vary.
                This tool does not constitute financial advice.
            </div>
        </div>

        <h1>üìä Income Gap Calculator</h1>
        <div class="subtitle">Calculate your retirement income gap based on your personal retirement goals</div>

        <form id="gapCalculator">
            <!-- Primary User Information -->
            <div class="form-group">
                <label for="desiredIncome">Desired Monthly Retirement Income (Household)
                    <div class="label-hint"><strong>Enter your total household goal.</strong> If including a spouse/partner, this is the combined amount you both want. Think about your lifestyle: housing, healthcare, travel, hobbies. Most households need $6,000-$10,000/month.</div>
                </label>
                <input type="number" id="desiredIncome" placeholder="e.g., 7500" required min="1000" step="100">
            </div>

            <div class="coach-note">
                <img src="coach-icon.jpg" alt="" style="width: 40px; height: 40px; vertical-align: middle; margin-right: 6px;">
                <span style="font-weight: bold; color: #2E5C8A; font-style: normal;">Coach Marty says:</span>
                <span class="coach-note-text">
                    Don't know what to enter? A common rule of thumb is 70-80% of your combined final working salaries. For example, if you and your spouse make a combined $120,000/year, that's about $7,000-$8,000/month in retirement.
                </span>
            </div>

            <div class="form-group">
                <label for="yearsToRetirement">Your Years Until Retirement
                    <div class="label-hint">Time horizon for growth</div>
                </label>
                <input type="number" id="yearsToRetirement" placeholder="e.g., 20" required min="1" max="50">
            </div>

            <div class="form-group">
                <label for="monthlyPension">Your Estimated Monthly Pension
                    <div class="label-hint">Use your state's teacher pension calculator (search: "your state teacher pension calculator") to get your estimate, then enter it here</div>
                </label>
                <input type="number" id="monthlyPension" placeholder="e.g., 4500" required min="0" step="100">
            </div>

            <div class="form-group">
                <label for="socialSecurity">Your Expected Monthly Social Security
                    <div class="label-hint"><strong>Don't know your estimate?</strong> <a href="https://www.ssa.gov/myaccount/" target="_blank" style="color: #2E5C8A; font-weight: 600;">Go to SSA.gov to get it</a></div>
                </label>
                <input type="number" id="socialSecurity" placeholder="e.g., 1500" min="0" value="0" step="100">
            </div>

            <div class="form-group">
                <label for="currentSavings">Your Current Retirement Savings (403b, 457b, IRAs)
                    <div class="label-hint">Enter 0 if starting fresh</div>
                </label>
                <input type="number" id="currentSavings" placeholder="e.g., 50000" required min="0" step="1000">
            </div>

            <div class="form-group">
                <label for="retirementAge">Your Retirement Age
                    <div class="label-hint">When you plan to retire</div>
                </label>
                <input type="number" id="retirementAge" value="65" required min="55" max="75" step="1">
            </div>

            <div class="form-group">
                <label for="planToAge">Plan for Living Until Age
                    <div class="label-hint">Planning horizon for retirement (default is 95)</div>
                </label>
                <input type="number" id="planToAge" value="95" required min="70" max="105" step="1">
            </div>

            <!-- Spouse Section -->
            <div class="checkbox-container" onclick="document.getElementById('includeSpouse').click();">
                <input type="checkbox" id="includeSpouse" onclick="event.stopPropagation();">
                <label for="includeSpouse" class="checkbox-label">üë´ Include spouse's income & pension? (common for dual-teacher households)</label>
            </div>

            <div class="coach-note">
                <img src="coach-icon.jpg" alt="" style="width: 40px; height: 40px; vertical-align: middle; margin-right: 6px;">
                <span style="font-weight: bold; color: #2E5C8A; font-style: normal;">Coach Marty says:</span>
                <span class="coach-note-text">
                    Many teacher couples overlook this ‚Äî your spouse's pension and savings can close a huge chunk of the gap. Include their information to see your complete household retirement picture!
                </span>
            </div>

            <div id="spouseSection" class="spouse-section">
                <div class="spouse-section-title">üë´ Spouse's Information</div>

                <div class="form-group">
                    <label for="spouseYearsToRetirement">Spouse's Years Until Retirement</label>
                    <input type="number" id="spouseYearsToRetirement" placeholder="e.g., 15" min="1" max="50">
                </div>

                <div class="form-group">
                    <label for="spousePension">Spouse's Estimated Monthly Pension
                        <div class="label-hint">Use their state's teacher pension calculator to get their estimate</div>
                    </label>
                    <input type="number" id="spousePension" placeholder="e.g., 3500" min="0" value="0" step="100">
                </div>

                <div class="form-group">
                    <label for="spouseSocialSecurity">Spouse's Expected Monthly Social Security
                        <div class="label-hint">From <a href="https://www.ssa.gov/myaccount/" target="_blank" style="color: #2E5C8A; font-weight: 600;">SSA.gov</a></div>
                    </label>
                    <input type="number" id="spouseSocialSecurity" placeholder="e.g., 1200" min="0" value="0" step="100">
                </div>

                <div class="form-group">
                    <label for="spouseSavings">Spouse's Current Retirement Savings
                        <div class="label-hint">Their 403b, 457b, IRAs, etc.</div>
                    </label>
                    <input type="number" id="spouseSavings" placeholder="e.g., 35000" min="0" value="0" step="1000">
                </div>
            </div>

            <button type="button" onclick="calculateGap()" class="calculate-btn">Calculate My Income Gap</button>
        </form>

        <!-- Results Section -->
        <div id="results" class="results">
            <div class="results-header">Your Retirement Income Breakdown</div>

            <div class="income-breakdown">
                <div class="breakdown-card">
                    <div class="breakdown-label">Desired Monthly Income</div>
                    <div class="breakdown-amount" id="desiredAmount">$0</div>
                </div>
                <div class="breakdown-card">
                    <div class="breakdown-label">Pension + Social Security</div>
                    <div class="breakdown-amount" id="guaranteedIncome">$0</div>
                </div>
                <div class="breakdown-card highlight">
                    <div class="breakdown-label">Monthly Income Gap</div>
                    <div class="breakdown-amount" id="gapAmount">$0</div>
                </div>
            </div>

            <div class="info-box">
                <div class="info-box-title">üí∞ Your Current Savings Will Grow!</div>
                <div id="savingsGrowth"></div>
            </div>

            <div class="info-box">
                <div class="info-box-title" id="contributionHeader">MONTHLY CONTRIBUTION NEEDED</div>
                <div id="contributionAmount"></div>
            </div>

            <!-- NEW: Will Your Money Last Section -->
            <div id="sustainabilitySection" class="sustainability-section">
                <div class="sustainability-title">üíµ Will Your Money Last?</div>
                
                <div id="verdict"></div>

                <table class="projection-table">
                    <thead>
                        <tr>
                            <th>Year</th>
                            <th>Age</th>
                            <th>Annual Withdrawal</th>
                            <th>Portfolio Balance</th>
                        </tr>
                    </thead>
                    <tbody id="projectionTableBody">
                    </tbody>
                </table>

                <div class="coach-note">
                    <img src="coach-icon.jpg" alt="" style="width: 40px; height: 40px; vertical-align: middle; margin-right: 6px;">
                    <span style="font-weight: bold; color: #2E5C8A; font-style: normal;">Coach Marty says:</span>
                    <span class="coach-note-text">
                        This projection assumes 7% annual growth. In retirement, many people shift to more conservative investments with lower returns ‚Äî but also lower risk. Your actual results will vary.
                    </span>
                </div>
            </div>

            <div class="action-steps">
                <h3>Next Steps:</h3>
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <div class="step-title">Set up automatic contributions</div>
                        <div>to your 403(b) and/or 457(b)</div>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <div class="step-title">Choose low-cost index funds</div>
                        <div>(0.15% fees or less)</div>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <div class="step-title">Increase contributions by 1% each year</div>
                        <div>as your salary grows</div>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <div class="step-title">Complete the remaining modules</div>
                        <div>to learn vendor selection and enrollment</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Toggle spouse section
        document.getElementById('includeSpouse').addEventListener('change', function() {
            const spouseSection = document.getElementById('spouseSection');
            if (this.checked) {
                spouseSection.classList.add('active');
            } else {
                spouseSection.classList.remove('active');
            }
        });

        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount);
        }

        // Calculate future value with compound interest
        function calculateFutureValue(presentValue, annualRate, years) {
            return presentValue * Math.pow(1 + annualRate, years);
        }

        // Calculate monthly payment needed to reach future value
        function calculateMonthlyContribution(futureValueNeeded, annualRate, years) {
            const monthlyRate = annualRate / 12;
            const totalMonths = years * 12;
            
            if (monthlyRate === 0) {
                return futureValueNeeded / totalMonths;
            }
            
            const denominator = Math.pow(1 + monthlyRate, totalMonths) - 1;
            return (futureValueNeeded * monthlyRate) / denominator;
        }

        // NEW: Calculate retirement sustainability projection
        function calculateSustainability(startingBalance, annualWithdrawal, retirementAge, planToAge, growthRate = 0.07) {
            const years = planToAge - retirementAge;
            const projectionYears = [1, 5, 10, 15, 20, 25, 30];
            const projection = [];
            let balance = startingBalance;
            let depletionYear = null;

            for (let year = 1; year <= years; year++) {
                // Withdraw at beginning of year
                balance -= annualWithdrawal;
                
                // Check if depleted
                if (balance <= 0 && depletionYear === null) {
                    depletionYear = year;
                    balance = 0;
                }

                // Grow remaining balance
                if (balance > 0) {
                    balance = balance * (1 + growthRate);
                }

                // Store milestone years
                if (projectionYears.includes(year)) {
                    projection.push({
                        year: year,
                        age: retirementAge + year,
                        withdrawal: annualWithdrawal,
                        balance: Math.max(0, balance)
                    });
                }
            }

            return { projection, depletionYear, finalBalance: balance };
        }

        function calculateGap() {
            // Get primary user inputs
            const desiredIncome = parseFloat(document.getElementById('desiredIncome').value);
            const yearsToRetirement = parseFloat(document.getElementById('yearsToRetirement').value);
            const monthlyPension = parseFloat(document.getElementById('monthlyPension').value);
            const socialSecurity = parseFloat(document.getElementById('socialSecurity').value) || 0;
            const currentSavings = parseFloat(document.getElementById('currentSavings').value);
            const retirementAge = parseInt(document.getElementById('retirementAge').value);
            const planToAge = parseInt(document.getElementById('planToAge').value);

            // Check if spouse is included
            const includeSpouse = document.getElementById('includeSpouse').checked;
            let spouseYearsToRetirement = 0;
            let spousePension = 0;
            let spouseSocialSecurity = 0;
            let spouseSavings = 0;

            if (includeSpouse) {
                spouseYearsToRetirement = parseFloat(document.getElementById('spouseYearsToRetirement').value) || yearsToRetirement;
                spousePension = parseFloat(document.getElementById('spousePension').value) || 0;
                spouseSocialSecurity = parseFloat(document.getElementById('spouseSocialSecurity').value) || 0;
                spouseSavings = parseFloat(document.getElementById('spouseSavings').value) || 0;
            }

            // Calculate gap
            let totalGuaranteedIncome = monthlyPension + socialSecurity;
            if (includeSpouse) {
                totalGuaranteedIncome += spousePension + spouseSocialSecurity;
            }
            
            const monthlyGap = Math.max(0, desiredIncome - totalGuaranteedIncome);
            const annualGap = monthlyGap * 12;
            
            // Total needed: Gap √ó 12 months √ó 25 years (4% withdrawal rule)
            const totalNeeded = monthlyGap * 12 * 25;

            // Calculate savings growth at 7% annual return
            const annualGrowthRate = 0.07;
            const futureSavings = calculateFutureValue(currentSavings, annualGrowthRate, yearsToRetirement);
            
            // Add spouse savings growth if applicable
            let totalFutureSavings = futureSavings;
            if (includeSpouse && spouseSavings > 0) {
                const spouseFutureSavings = calculateFutureValue(spouseSavings, annualGrowthRate, spouseYearsToRetirement);
                totalFutureSavings = futureSavings + spouseFutureSavings;
            }

            // Calculate remaining amount needed
            const remainingNeeded = Math.max(0, totalNeeded - totalFutureSavings);
            
            // Calculate monthly contribution
            const monthlyContribution = (remainingNeeded > 0) 
                ? calculateMonthlyContribution(remainingNeeded, annualGrowthRate, yearsToRetirement)
                : 0;

            // Update display with dynamic labels
            if (includeSpouse) {
                document.querySelector('#results .income-breakdown .breakdown-card:nth-child(1) .breakdown-label').textContent = 'Household Desired Income';
                document.querySelector('#results .income-breakdown .breakdown-card:nth-child(2) .breakdown-label').textContent = 'Combined Pension + SS';
                document.querySelector('#results .income-breakdown .breakdown-card:nth-child(3) .breakdown-label').textContent = 'Household Income Gap';
            } else {
                document.querySelector('#results .income-breakdown .breakdown-card:nth-child(1) .breakdown-label').textContent = 'Desired Monthly Income';
                document.querySelector('#results .income-breakdown .breakdown-card:nth-child(2) .breakdown-label').textContent = 'Pension + Social Security';
                document.querySelector('#results .income-breakdown .breakdown-card:nth-child(3) .breakdown-label').textContent = 'Monthly Income Gap';
            }

            document.getElementById('desiredAmount').textContent = formatCurrency(desiredIncome);
            document.getElementById('guaranteedIncome').textContent = formatCurrency(totalGuaranteedIncome);
            document.getElementById('gapAmount').textContent = formatCurrency(monthlyGap);

            // Savings growth display
            if (includeSpouse && spouseSavings > 0) {
                document.getElementById('savingsGrowth').innerHTML = 
                    `Your combined savings (${formatCurrency(currentSavings + spouseSavings)}) will grow to approximately 
                    <strong>${formatCurrency(totalFutureSavings)}</strong> by retirement 
                    (assuming 7% annual growth).`;
            } else {
                document.getElementById('savingsGrowth').innerHTML = 
                    `Your ${formatCurrency(currentSavings)} will grow to approximately 
                    <strong>${formatCurrency(futureSavings)}</strong> by retirement 
                    (assuming 7% annual growth).`;
            }

            // Contribution needed display
            if (monthlyContribution === 0) {
                document.getElementById('contributionHeader').textContent = 'üéâ You\'re On Track!';
                document.getElementById('contributionAmount').innerHTML = 
                    `Your current savings will grow to cover your income gap! Keep your savings invested and maintain your course.`;
            } else {
                document.getElementById('contributionHeader').textContent = 'MONTHLY CONTRIBUTION NEEDED';
                document.getElementById('contributionAmount').innerHTML = 
                    `<div style="font-size: 36px; font-weight: bold; color: #2E5C8A; margin: 10px 0;">
                        ${formatCurrency(monthlyContribution)}
                    </div>
                    <div style="margin-top: 10px;">
                        Contribute this amount for <strong>${yearsToRetirement} years</strong> (until retirement at age ${retirementAge}) to bridge your ${formatCurrency(monthlyGap)}/month gap.
                    </div>`;
            }

            // NEW: Calculate and display sustainability projection
            const sustainability = calculateSustainability(totalFutureSavings, annualGap, retirementAge, planToAge);
            
            // Display verdict
            const verdictDiv = document.getElementById('verdict');
            if (sustainability.depletionYear === null) {
                verdictDiv.className = 'verdict success';
                verdictDiv.innerHTML = '‚úÖ Your money lasts 30+ years! You\'re on track for a secure retirement.';
            } else {
                const depletionAge = retirementAge + sustainability.depletionYear;
                verdictDiv.className = 'verdict warning';
                verdictDiv.innerHTML = `‚ö†Ô∏è Warning: Your portfolio may run out at age ${depletionAge} (year ${sustainability.depletionYear} of retirement). Consider increasing your savings or reducing your retirement spending.`;
            }

            // Build projection table
            const tableBody = document.getElementById('projectionTableBody');
            tableBody.innerHTML = '';
            
            sustainability.projection.forEach(row => {
                const tr = document.createElement('tr');
                if (row.balance === 0) {
                    tr.className = 'depleted';
                }
                tr.innerHTML = `
                    <td>${row.year}</td>
                    <td>${row.age}</td>
                    <td>${formatCurrency(row.withdrawal)}</td>
                    <td>${row.balance === 0 ? 'DEPLETED' : formatCurrency(row.balance)}</td>
                `;
                tableBody.appendChild(tr);
            });

            // Show results
            document.getElementById('results').classList.add('active');
            
            // Scroll to results
            document.getElementById('results').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
    </script>
    
    <!-- Footer -->
    <footer style="background: #1B3A57; color: white; padding: 32px 20px; margin-top: 48px; text-align: center;">
        <p style="font-size: 14px; margin-bottom: 12px;">&copy; 2026 TeacherFinCoach. Building Wealth for Educators.</p>
        <p style="font-size: 12px; color: rgba(255,255,255,0.8); margin-bottom: 8px;">
            <strong>Educational Purposes Only:</strong> TeacherFinCoach provides general educational information about retirement planning for teachers. 
            This content does not constitute financial, investment, tax, or legal advice.
        </p>
        <p style="font-size: 12px; color: rgba(255,255,255,0.7);">
            Consult with a qualified financial advisor for personalized guidance. 
            <a href="terms.html" style="color: #6BC9BC; text-decoration: underline;">Terms & Disclaimers</a>
        </p>
    </footer>    
</body>
</html>
